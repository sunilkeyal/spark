<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="
             http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
             http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd">

    <camelContext xmlns="http://camel.apache.org/schema/blueprint" xmlns:order="http://fabric8.com/examples/order/v7"
                  id="spark-processor-context">

        <route id="file-to-jms-route">
            <from uri="file:/home/skeyal/spark/input" />
            <log message="Receiving order ${file:name}" />
            <to uri="amq:incomingOrders" />
        </route>

        <route id="jms-cbr-route">
            <from uri="amq:incomingOrders" />
            <multicast>
                <to uri="file:/home/skeyal/spark/output/test1" />
                <to uri="file:/home/skeyal/spark/output/test2" />
            </multicast>
            <log message="Done processing ${file:name}" />
        </route>
    </camelContext>
</blueprint>
